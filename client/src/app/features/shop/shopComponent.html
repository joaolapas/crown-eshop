<div class="flex flex-col gap-3">
  <div class="flex justify-between">
    <mat-paginator container-background-color="red"
      (page)="handlePageEvent($event)"
      [length]="shopService.pagination()?.count ?? 0"
      [pageSize]="shopParams.pageSize"
      [showFirstLastButtons]="true"
      [pageSizeOptions]="pageSizeOptions"
      [pageIndex]="shopParams.pageNumber - 1"
      aria-label="Select page">
    </mat-paginator>

    <form
      #searchForm="ngForm"
      (ngSubmit)="onSearchChange()"
      class="relative flex items-center max-w-lg mx-4 max-h-min"
    >
      <input
        type="text"
        class="block w-full p-2 mt-1 text-sm text-neutral-700 border border-neutral-400 rounded-2xl"
        placeholder="Search"
        name="search"
        [(ngModel)]="shopParams.search"

      />
      <button mat-icon-button type="submit"
        class="absolute right-2 top-2.5 flex items-center">
        <mat-icon>search</mat-icon>
      </button>
    </form>

    <div class="flex gap-3">
      <button class="text-neutral-800!" mat-stroked-button (click)="openFiltersDialog()">
        <mat-icon>filter_list</mat-icon>
        Filter
      </button>

      <button class="text-neutral-800!" mat-stroked-button [matMenuTriggerFor]="sortMenu">
        <mat-icon>swap_vert</mat-icon>
        Sort
      </button>
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    @for (product of shopService.products(); track product.id) {
      <app-product-item [product]="product"></app-product-item>
    }
  </div>
</div>

<mat-menu #sortMenu="matMenu">
  <mat-selection-list [multiple]="false">
    @for (sort of sortOptions; track sort.value) {
      <mat-list-option  (click)="setSort(sort.value)">
        {{ sort.name }}
      </mat-list-option>
    }
  </mat-selection-list>

</mat-menu>
